//==============================================
// Application main menu screen
//----------------------------------------------
// Author:  Gerard Llort Casanova
// Version: 1.1
// Copyright (c) 2021
//==============================================

#ifndef _DRIVESCREEN_H 
#define _DRIVESCREEN_H 

#import  <Arduino.h>
#include "Screen.h"

#define UI_CTRL_F0            0
#define UI_CTRL_F1            1
#define UI_CTRL_F2            2
#define UI_CTRL_F3            3
#define UI_CTRL_F4            4
#define UI_CTRL_F5            5
#define UI_CTRL_F6            6
#define UI_CTRL_F7            7
#define UI_CTRL_DIR_FWD       8
#define UI_CTRL_DIR_REV       9
#define UI_CTRL_RETURN        10
#define UI_CTRL_SPEED_UP      11
#define UI_CTRL_SPEED_UP_BIG  12
#define UI_CTRL_SPEED_DWN     13
#define UI_CTRL_SPEED_DWN_BIG 14
#define UI_CTRL_STOP          15
#define UI_CTRL_PGBAR         16

#define ENCODER_PIN_1   22
#define ENCODER_PIN_2   23

static const uint8_t bmpSpeedSingleUp [] PROGMEM = {
  // 'go_single_up, 18x15px
  0x00, 0xc0, 0x00, 0x00, 0xc0, 0x00, 0x01, 0xe0, 0x00, 0x01, 0xe0, 0x00, 0x03, 0xf0, 0x00, 0x07, 
  0xf8, 0x00, 0x07, 0xf8, 0x00, 0x0f, 0xfc, 0x00, 0x1f, 0xfe, 0x00, 0x1f, 0xfe, 0x00, 0x3f, 0xff, 
  0x00, 0x7f, 0xff, 0x80, 0x7f, 0xff, 0x80, 0xff, 0xff, 0xc0, 0x00, 0x00, 0x00
};

static const uint8_t bmpSpeedSingleDown [] PROGMEM = {
  // 'go_single_down, 18x15px
  0x00, 0x00, 0x00, 0xff, 0xff, 0xc0, 0x7f, 0xff, 0x80, 0x7f, 0xff, 0x80, 0x3f, 0xff, 0x00, 0x1f, 
  0xfe, 0x00, 0x1f, 0xfe, 0x00, 0x0f, 0xfc, 0x00, 0x07, 0xf8, 0x00, 0x07, 0xf8, 0x00, 0x03, 0xf0, 
  0x00, 0x01, 0xe0, 0x00, 0x01, 0xe0, 0x00, 0x00, 0xc0, 0x00, 0x00, 0xc0, 0x00
};

static const uint8_t bmpSpeedMultiUp [] PROGMEM = {
  // 'go_multi_up, 16x23px
  0x01, 0x80, 0x03, 0xc0, 0x03, 0xc0, 0x07, 0xe0, 0x0f, 0xf0, 0x0f, 0xf0, 0x1f, 0xf8, 0x3f, 0xfc, 
  0x3f, 0xfc, 0x7f, 0xfe, 0x7f, 0xff, 0x00, 0x00, 0x01, 0x80, 0x03, 0xc0, 0x03, 0xc0, 0x07, 0xe0, 
  0x0f, 0xf0, 0x0f, 0xf0, 0x1f, 0xf8, 0x3f, 0xfc, 0x3f, 0xfc, 0x7f, 0xfe, 0x7f, 0xff
};

static const uint8_t bmpSpeedMultiDown [] PROGMEM = {
  // 'go_multi_down, 16x23px
  0xff, 0xfe, 0x7f, 0xfe, 0x3f, 0xfc, 0x3f, 0xfc, 0x1f, 0xf8, 0x0f, 0xf0, 0x0f, 0xf0, 0x07, 0xe0, 
  0x03, 0xc0, 0x03, 0xc0, 0x01, 0x80, 0x00, 0x00, 0xff, 0xfe, 0x7f, 0xfe, 0x3f, 0xfc, 0x3f, 0xfc, 
  0x1f, 0xf8, 0x0f, 0xf0, 0x0f, 0xf0, 0x07, 0xe0, 0x03, 0xc0, 0x03, 0xc0, 0x01, 0x80
};

static const uint8_t bmpStop [] PROGMEM = {
  // 'stop, 24x24px
  0x01, 0xff, 0x80, 0x03, 0xff, 0xc0, 0x07, 0xff, 0xe0, 0x0f, 0xff, 0xf0, 0x1f, 0xff, 0xf8, 0x3f, 
  0xe7, 0xfc, 0x7f, 0xe7, 0xfe, 0xff, 0xe7, 0xff, 0xff, 0xe7, 0xff, 0xff, 0xe7, 0xff, 0xff, 0xe7, 
  0xff, 0xff, 0xe7, 0xff, 0xff, 0xe7, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 
  0xff, 0xe7, 0xff, 0x7f, 0xc3, 0xfe, 0x3f, 0xe7, 0xfc, 0x1f, 0xff, 0xf8, 0x0f, 0xff, 0xf0, 0x07, 
  0xff, 0xe0, 0x03, 0xff, 0xc0, 0x01, 0xff, 0x80
};

static const uint8_t bmpDirLeft [] PROGMEM = {
  // 'dir_left, 15x18px
  0x00, 0x04, 0x00, 0x1c, 0x00, 0x3c, 0x00, 0xfc, 0x01, 0xfc, 0x07, 0xfc, 0x0f, 0xfc, 0x3f, 0xfc, 
  0xff, 0xfc, 0xff, 0xfc, 0x3f, 0xfc, 0x0f, 0xfc, 0x07, 0xfc, 0x01, 0xfc, 0x00, 0xfc, 0x00, 0x3c, 
  0x00, 0x1c, 0x00, 0x04
};

static const uint8_t bmpDirRight [] PROGMEM = {
  // 'dir_right, 15x18px
  0x40, 0x00, 0x70, 0x00, 0x78, 0x00, 0x7e, 0x00, 0x7f, 0x00, 0x7f, 0xc0, 0x7f, 0xe0, 0x7f, 0xf8, 
  0x7f, 0xfe, 0x7f, 0xfe, 0x7f, 0xf8, 0x7f, 0xe0, 0x7f, 0xc0, 0x7f, 0x00, 0x7e, 0x00, 0x78, 0x00, 
  0x70, 0x00, 0x40, 0x00
};

class DriveScreen : public Screen
{
  uint8_t   selIdx;           // Selected menu ID
  long      oldEncPos    = -999;

public:

  //----------------------------------------------
  // Constructors
  //----------------------------------------------
  DriveScreen();

  //----------------------------------------------
  // Methods
  //----------------------------------------------
  void Initialize(TouchDisplay lcdDisplay);
  void Dispatch(void);
  void Shown(void) ;
  uint8_t ClickHandler(uint8_t objId) override;
  
};

//----------------------------------------------
// Callbacks
//----------------------------------------------
extern void ClickedElement(uint8_t id) __attribute__ ((weak));

#endif
